"use strict";(self.webpackChunktechnical_tutorial=self.webpackChunktechnical_tutorial||[]).push([[337],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=u(n),d=r,b=m["".concat(s,".").concat(d)]||m[d]||c[d]||o;return n?a.createElement(b,l(l({ref:t},p),{},{components:n})):a.createElement(b,l({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2466:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return c}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),l=["components"],i={},s="Install Gitlab Runner on Ubuntu 20.04 LTS",u={unversionedId:"devops/gitlab/gitlab-runner-installation-ubuntu",id:"devops/gitlab/gitlab-runner-installation-ubuntu",title:"Install Gitlab Runner on Ubuntu 20.04 LTS",description:"Reference: Install GitLab Runner manually on GNU/Linux",source:"@site/docs/devops/gitlab/gitlab-runner-installation-ubuntu.md",sourceDirName:"devops/gitlab",slug:"/devops/gitlab/gitlab-runner-installation-ubuntu",permalink:"/docs/devops/gitlab/gitlab-runner-installation-ubuntu",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/devops/gitlab/gitlab-runner-installation-ubuntu.md",tags:[],version:"current",frontMatter:{},sidebar:"devopsSidebar",previous:{title:"Gitlab Installation on Ubuntu 20.04 LTS",permalink:"/docs/devops/gitlab/gitlab-installation-ubuntu"},next:{title:"Migrate Gitlab from one server to another",permalink:"/docs/devops/gitlab/gitlab-backup-and-restore"}},p={},c=[{value:"Prerequirement:",id:"prerequirement",level:2},{value:"Download",id:"download",level:2},{value:"Install",id:"install",level:2},{value:"Install the package for your system as follows:",id:"install-the-package-for-your-system-as-follows",level:3},{value:"Register the Runner",id:"register-the-runner",level:3},{value:"Update",id:"update",level:2}],m={toc:c};function d(e){var t=e.components,n=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"install-gitlab-runner-on-ubuntu-2004-lts"},"Install Gitlab Runner on Ubuntu 20.04 LTS"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Reference:")," ",(0,o.kt)("a",{parentName:"p",href:"https://docs.gitlab.com/runner/install/linux-manually.html"},"Install GitLab Runner manually on GNU/Linux")),(0,o.kt)("h2",{id:"prerequirement"},"Prerequirement:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Before installing the gitlab-runner, Please ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/PFTian/TechNotes/blob/master/Docker/Docker%20Installation.md"},"install Docker")," at first.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Notice:"),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},"We strongly advise against installing GitLab Runner on the same machine you plan to install GitLab on. Depending on how you decide to configure GitLab Runner and what tools you use to exercise your application in the CI environment, GitLab Runner can consume significant amount of available memory.")),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},"Memory consumption calculations, that are available above, will not be valid if you decide to run GitLab Runner and the GitLab Rails application on the same machine.")),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},"It is also not safe to install everything on a single machine, because of the security reasons - especially when you plan to use shell executor with GitLab Runner.")),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},"We recommend using a separate machine for each GitLab Runner, if you plan to use the CI features.")))),(0,o.kt)("h2",{id:"download"},"Download"),(0,o.kt)("p",null,"To download the appropriate package for your system:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Find the latest file name and options at ",(0,o.kt)("a",{parentName:"p",href:"https://gitlab-runner-downloads.s3.amazonaws.com/latest/index.html"},"https://gitlab-runner-downloads.s3.amazonaws.com/latest/index.html"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Choose a version and download a binary, as described in the documentation for ",(0,o.kt)("a",{parentName:"p",href:"https://docs.gitlab.com/runner/install/bleeding-edge.html#download-any-other-tagged-release"},"downloading any other tagged releases")," for bleeding edge GitLab Runner releases."),(0,o.kt)("p",{parentName:"li"},"For Debian or Ubuntu"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -LJO https://gitlab-runner-downloads.s3.amazonaws.com/latest/deb/gitlab-runner_<arch>.deb\n")),(0,o.kt)("p",{parentName:"li"},"For my example:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -LJO https://gitlab-runner-downloads.s3.amazonaws.com/latest/deb/gitlab-runner_amd64.deb\n")))),(0,o.kt)("h2",{id:"install"},"Install"),(0,o.kt)("h3",{id:"install-the-package-for-your-system-as-follows"},"Install the package for your system as follows:"),(0,o.kt)("p",null,"For Debian or Ubuntu"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"```bash\nsudo dpkg -i gitlab-runner_<arch>.deb\n```\n\nFor my example\n\n```bash\nsudo dpkg -i gitlab-runner_amd64.deb\n```\n")),(0,o.kt)("h3",{id:"register-the-runner"},"Register the Runner"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Run the following command:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo gitlab-runner register\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter your GitLab instance URL:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )\nhttps://gitlab.com\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter the token you obtained to register the Runner:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"Please enter the gitlab-ci token for this runner\nxxx\n")))),(0,o.kt)("p",null,"The information of above step 2 & 3 can be found in the ",(0,o.kt)("strong",{parentName:"p"},"Admin Area")," of gitlab."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- Login gitlab as administrator and click the Admin Area icon on the top.\n- Go to **Overview** section and Click **Runner**.\n- You can find the information on the right.\n![image](https://user-images.githubusercontent.com/17267466/90331860-82526280-dfea-11ea-9051-a096133fc496.png)\n")),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter a description for the Runner, you can change this later in GitLab\u2019s UI:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"Please enter the gitlab-ci description for this runner\n[hostname] my-runner\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter the tags associated with the Runner, you can change this later in GitLab\u2019s UI:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"Please enter the gitlab-ci tags for this runner (comma separated):\nmy-tag,another-tag\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter the Runner executor:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"Please enter the executor: ssh, docker+machine, docker-ssh+machine, kubernetes, docker, parallels, virtualbox, docker-ssh, shell:\ndocker\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"If you chose Docker as your executor, you\u2019ll be asked for the default image to be used for projects that do not define one in .gitlab-ci.yml:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"Please enter the Docker image (eg. ruby:2.6):\nalpine:latest\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"If the runner is registered successfully, it will show you the below message."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"Runner registered successfully. Feel free to start it, but if it's running already the config should be automatically reloaded!\n")))),(0,o.kt)("p",null,"You can also go to the ",(0,o.kt)("strong",{parentName:"p"},"Admin Area"),", Click ",(0,o.kt)("strong",{parentName:"p"},"Overview > Runner")," to check the configured shared runner."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/17267466/90332057-47512e80-dfec-11ea-9ed4-57225dd3cae9.png",alt:"image"})),(0,o.kt)("h2",{id:"update"},"Update"),(0,o.kt)("p",null,"Download the latest package for your system then upgrade as follows:"),(0,o.kt)("p",null,"For Debian or Ubuntu:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"```bash\ndpkg -i gitlab-runner_<arch>.deb\n```\n")))}d.isMDXComponent=!0}}]);