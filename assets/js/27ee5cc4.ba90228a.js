"use strict";(self.webpackChunktechnical_tutorial=self.webpackChunktechnical_tutorial||[]).push([[2597],{8073:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});var s=a(4848),r=a(8453);const t={},o="Tips",i={id:"software-development/frontend/react/reactnative/tips",title:"Tips",description:"Clean the Gradle caches",source:"@site/docs/software-development/frontend/react/reactnative/tips.md",sourceDirName:"software-development/frontend/react/reactnative",slug:"/software-development/frontend/react/reactnative/tips",permalink:"/TechnicalTutorial/docs/software-development/frontend/react/reactnative/tips",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"softwareDevlopmentSidebar",previous:{title:"how-to-manage-staging-and-production-environments-in-react-native",permalink:"/TechnicalTutorial/docs/software-development/frontend/react/reactnative/how-to-manage-staging-and-production-environments-in-react-native"},next:{title:"React-Hooks",permalink:"/TechnicalTutorial/docs/software-development/frontend/react/hooks/react-hooks"}},l={},d=[{value:"Clean the Gradle caches",id:"clean-the-gradle-caches",level:2},{value:"Detox e2e setup common issues",id:"detox-e2e-setup-common-issues",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"tips",children:"Tips"})}),"\n",(0,s.jsx)(n.h2,{id:"clean-the-gradle-caches",children:"Clean the Gradle caches"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'find ~/.gradle -type f -name "*.lock" -delete\n'})}),"\n",(0,s.jsx)(n.h2,{id:"detox-e2e-setup-common-issues",children:"Detox e2e setup common issues"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Out of memory error when run ",(0,s.jsx)(n.code,{children:"./gradlew assembleDebug assembleAndroidTest -DtestBuildType=debug"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"java.lang.OutOfMemoryError: Java heap space\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsxs)(n.p,{children:["Add ",(0,s.jsx)(n.code,{children:"org.gradle.jvmargs=-Xmx4608m"})," to ",(0,s.jsx)(n.code,{children:"android/build.gradle"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["run ",(0,s.jsx)(n.code,{children:"detox test --configuration ios.sim.debug"})," works successfully but failed when run ",(0,s.jsx)(n.code,{children:"detox test --configuration android.emu.debu"})," after setting up detox following detox official documents"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"DetoxRuntimeError: Test Failed: '(view has effective visibility <VISIBLE> and view.getGlobalVisibleRect() covers at least <75> percent of the view's area)' doesn't match the selected view.\n    Expected: (view has effective visibility <VISIBLE> and view.getGlobalVisibleRect() covers at least <75> percent of the view's area)\n        Got: was null\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsxs)(n.p,{children:["comment ",(0,s.jsx)(n.code,{children:"await device.reloadReactNative();"})," in ",(0,s.jsx)(n.code,{children:"beforeEach()"})," of ",(0,s.jsx)(n.code,{children:"firstTest.e2e.js"})," gemerated by ",(0,s.jsx)(n.code,{children:"detox init"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"beforeEach(async () => {\n  // await device.reloadReactNative();\n});\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Cannot resolve symbol 'TestButlerProbe'"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsxs)(n.p,{children:["Comment ",(0,s.jsx)(n.code,{children:"TestButlerProbe.assertReadyIfInstalled();"})," in the ",(0,s.jsx)(n.code,{children:"DetoxTest.java"})," if you don't use TestButler"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"// TestButlerProbe.assertReadyIfInstalled();\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Run ",(0,s.jsx)(n.code,{children:"sdkmanager"})," throws error"]}),"\n",(0,s.jsxs)(n.p,{children:["run ",(0,s.jsx)(n.code,{children:"sdkmanager --list"})," and get ",(0,s.jsx)(n.code,{children:"java.lang.NoClassDefFoundError"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'xception in thread "main" java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema\n        at com.android.repository.api.SchemaModule$SchemaModuleVersion.<init>(SchemaModule.java:156)\n        at com.android.repository.api.SchemaModule.<init>(SchemaModule.java:75)\n        at com.android.sdklib.repository.AndroidSdkHandler.<clinit>(AndroidSdkHandler.java:81)\n        at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)\n        at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        ... 5 more\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Install Java 1.8"}),"\n",(0,s.jsxs)(n.li,{children:["Run the command line with ",(0,s.jsx)(n.code,{children:"JAVA_HOME"})," environment variable"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:" JAVA_HOME=$(/usr/libexec/java_home -v 1.8) sdkmanager --list\n"})}),"\n",(0,s.jsx)(n.p,{children:"or"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"JAVA_HOME=$(/usr/libexec/java_home -v 1.8) $ANDROID_HOME/tools/bin/sdkmanager --list\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Latest ",(0,s.jsx)(n.code,{children:"emulator"})," cannot launch the avd device"]}),"\n",(0,s.jsxs)(n.p,{children:["Run",(0,s.jsx)(n.code,{children:"$ANDROID_HOME/tools/bin/sdkmanager --install emulator"})," to install the latest android emulator, but cannot launch avd with error ",(0,s.jsx)(n.code,{children:"The emulator process for AVD xxx has terminated."})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsx)(n.p,{children:"Just remove the installed emulator by"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ANDROID_HOME/tools/bin/sdkmanager --uninstall emulator\n"})}),"\n",(0,s.jsx)(n.p,{children:"and install the emulator from Android Studio by"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Preference..."})," -> ",(0,s.jsx)(n.code,{children:"Appearance & Behavior"})," -> ",(0,s.jsx)(n.code,{children:"System Settings"})," -> ",(0,s.jsx)(n.code,{children:"Android SDK"})," -> ",(0,s.jsx)(n.code,{children:"SDK Tools"})," -> Tick ",(0,s.jsx)(n.code,{children:"Android Emulator"})," -> Click ",(0,s.jsx)(n.code,{children:"Apply"})," and ",(0,s.jsx)(n.code,{children:"OK"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image",src:a(5672).A+"",width:"1247",height:"880"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},5672:(e,n,a)=>{a.d(n,{A:()=>s});const s=a.p+"assets/images/androidSDK-ccd477ee4e85e0da0b0241bdfea6e56d.png"},8453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>i});var s=a(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);