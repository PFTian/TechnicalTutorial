"use strict";(self.webpackChunktechnical_tutorial=self.webpackChunktechnical_tutorial||[]).push([[3757],{5697:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var s=t(6070),i=t(5296);const a={},r="Gitlab Installation on Ubuntu 20.04 LTS",l={id:"devops/gitlab/gitlab-installation-ubuntu",title:"Gitlab Installation on Ubuntu 20.04 LTS",description:"Content",source:"@site/docs/devops/gitlab/gitlab-installation-ubuntu.md",sourceDirName:"devops/gitlab",slug:"/devops/gitlab/gitlab-installation-ubuntu",permalink:"/TechnicalTutorial/docs/devops/gitlab/gitlab-installation-ubuntu",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},o={},d=[{value:"Content",id:"content",level:2},{value:"Requirements",id:"requirements",level:2},{value:"CPU",id:"cpu",level:2},{value:"Memory",id:"memory",level:2},{value:"Installation",id:"installation",level:2},{value:"1. Install and configure the necessary dependencies",id:"1-install-and-configure-the-necessary-dependencies",level:3},{value:"2. Add the GitLab package repository and install the package",id:"2-add-the-gitlab-package-repository-and-install-the-package",level:3},{value:"3. Browse to the hostname and login",id:"3-browse-to-the-hostname-and-login",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"gitlab-installation-on-ubuntu-2004-lts",children:"Gitlab Installation on Ubuntu 20.04 LTS"})}),"\n",(0,s.jsx)(n.h2,{id:"content",children:"Content"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#Requirements",children:"Requirements"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#Installation",children:"Installation"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsxs)(n.p,{children:["The official hardware requirements is listed in ",(0,s.jsx)(n.a,{href:"https://docs.gitlab.com/ee/install/requirements.html",children:"this page"}),", Please check this ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Requirement"})})," document before you install the gitlab."]}),"\n",(0,s.jsx)(n.p,{children:"Based on the official document, the below hardware is needed for a server."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.h2,{id:"cpu",children:"CPU"}),"\n",(0,s.jsx)(n.p,{children:"The following is the recommended minimum CPU hardware guidance for a handful of example GitLab user base sizes."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"4 cores"})," is the ",(0,s.jsx)(n.strong,{children:"recommended"})," minimum number of cores and supports up to 500 users"]}),"\n",(0,s.jsx)(n.li,{children:"8 cores supports up to 1000 users"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.h2,{id:"memory",children:"Memory"}),"\n",(0,s.jsx)(n.p,{children:"The following is the recommended minimum Memory hardware guidance for a handful of example GitLab user base sizes."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"4GB RAM"})," is the ",(0,s.jsx)(n.strong,{children:"required"})," minimum memory size and supports up to 500 users"]}),"\n",(0,s.jsx)(n.li,{children:"8GB RAM supports up to 1000 users"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Based on my testing/experiment. The minimum hardware requirement that can run gitlab smoothly is"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Hardware"}),(0,s.jsx)(n.th,{children:"Value"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CPU"}),(0,s.jsx)(n.td,{children:"2 Cores"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Memory"}),(0,s.jsx)(n.td,{children:"4GB RAM"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"With this hardware, we don't need to add any swap space on the server."}),"\n",(0,s.jsx)(n.p,{children:"However, based on the suggestion from the official document"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"In addition to the above, we generally recommend having at least 2GB of swap on your server, even if you currently have enough available RAM. Having swap will help reduce the chance of errors occurring if your available memory changes. We also recommend configuring the kernel\u2019s swappiness setting to a low value like 10 to make the most of your RAM while still having the swap available when needed."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["We'd better to add a swap space on the server. (",(0,s.jsx)(n.em,{children:"Reference"}),": ",(0,s.jsx)(n.a,{href:"https://linuxize.com/post/how-to-add-swap-space-on-ubuntu-18-04/",children:"How to add swap space on ubuntu 18.04"}),")"]}),"\n",(0,s.jsx)(n.p,{children:"With adding swap space (at leaset 2 GB) on linux server, the machine with below hardware can also run the gitlab."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Hardware"}),(0,s.jsx)(n.th,{children:"Value"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CPU"}),(0,s.jsx)(n.td,{children:"1 Core"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Memory"}),(0,s.jsx)(n.td,{children:"1GB RAM"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Swap"}),(0,s.jsx)(n.td,{children:"4GB"})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Hardware"}),(0,s.jsx)(n.th,{children:"Value"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CPU"}),(0,s.jsx)(n.td,{children:"1 Core"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Memory"}),(0,s.jsx)(n.td,{children:"2GB RAM"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Swap"}),(0,s.jsx)(n.td,{children:"2GB"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsxs)(n.p,{children:["OS: ",(0,s.jsx)(n.em,{children:"Ubuntu 16.04LTS 18.04LTS 20.04LTS"})]}),"\n",(0,s.jsx)(n.h3,{id:"1-install-and-configure-the-necessary-dependencies",children:"1. Install and configure the necessary dependencies"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"STEP 1"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install -y curl openssh-server ca-certificates\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"STEP 2"})}),"\n",(0,s.jsxs)(n.p,{children:["Next, install ",(0,s.jsx)(n.code,{children:"Postfix"})," to send notification emails. If you want to use another solution to send emails please skip this step and ",(0,s.jsx)(n.a,{href:"https://docs.gitlab.com/omnibus/settings/smtp.html",children:"configure an external SMTP server"})," after GitLab has been installed."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install -y postfix\n"})}),"\n",(0,s.jsxs)(n.p,{children:["During Postfix installation a configuration screen may appear. Select ",(0,s.jsx)(n.code,{children:"Internet Site"})," and press enter. Use your server's external DNS for ",(0,s.jsx)(n.code,{children:"mail name"})," and press enter. If additional screens appear, continue to press enter to accept the defaults."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"TODO"}),":"]}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Solve how to config postfix. Based on the current postfix configuration during above description, the postfix cannot send email to the registered users."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-add-the-gitlab-package-repository-and-install-the-package",children:"2. Add the GitLab package repository and install the package"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"STEP 1"})}),"\n",(0,s.jsx)(n.p,{children:"Add the GitLab package repository"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.deb.sh | sudo bash\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"NOTE: Mainland Server Installation"})})}),"\n",(0,s.jsx)(n.p,{children:"For the server in the mainland China, it is better to change the gitlab official repository to tsinghua gitlab repository, otherwise, it will be very slow to download the gitlab."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo vim /etc/apt/sources.list.d/gitlab_gitlab-ce.list\n"})}),"\n",(0,s.jsx)(n.p,{children:"Replace or comment the below lines"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"deb https://packages.gitlab.com/gitlab/gitlab-ee/ubuntu/ bionic main\ndeb-src https://packages.gitlab.com/gitlab/gitlab-ee/ubuntu/ bionic main\n"})}),"\n",(0,s.jsx)(n.p,{children:"to"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"deb https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu bionic main\n\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu bionic main\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then, excute"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"STEP 2"})}),"\n",(0,s.jsxs)(n.p,{children:["Next, install the GitLab package. Change ",(0,s.jsx)(n.code,{children:"https://gitlab.example.com"})," to the URL at which you want to access your GitLab instance. Installation will automatically configure and start GitLab at that URL."]}),"\n",(0,s.jsxs)(n.p,{children:["For ",(0,s.jsx)(n.code,{children:"https://"})," URLs GitLab will automatically request a certificate with ",(0,s.jsx)(n.strong,{children:"Let's Encrypt"}),", which requires inbound HTTP access and a valid hostname. You can also use your own certificate or just use ",(0,s.jsx)(n.code,{children:"http://"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'sudo EXTERNAL_URL="https://gitlab.example.com" apt-get install gitlab-ee\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Reference"})," ",(0,s.jsx)(n.a,{href:"#",children:"How to assign a domain name to a server"})]}),"\n",(0,s.jsx)(n.h3,{id:"3-browse-to-the-hostname-and-login",children:"3. Browse to the hostname and login"}),"\n",(0,s.jsxs)(n.p,{children:["Unless you provided a custom password during installation, a password will be randomly generated and stored for 24 hours in ",(0,s.jsx)(n.code,{children:"/etc/gitlab/initial_root_password"}),". Use this password with username ",(0,s.jsx)(n.code,{children:"root"})," to login."]}),"\n",(0,s.jsxs)(n.p,{children:["See our ",(0,s.jsx)(n.a,{href:"https://docs.gitlab.com/omnibus/README.html#installation-and-configuration-using-omnibus-package",children:"documentation for detailed instructions on installing and configuration"}),"."]}),"\n",(0,s.jsx)(n.h1,{id:"what-is-next",children:"What is NEXT?"}),"\n",(0,s.jsx)(n.p,{children:"After installing the Gitlab, we need to config CI/CD on the Gitlab."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/LeoTianJob/TechWiki/wiki/Docker-Installation",children:"Install Docker on the server"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/LeoTianJob/TechWiki/wiki/Gitlab-Runner",children:"Install gitlab runner on the server"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},5296:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var s=t(758);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);